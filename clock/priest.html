<html>
<link href="../NXTJS/sole-design.css" rel="stylesheet">
<link href="../NXTJS/elements-design.css" rel="stylesheet">
<link href="../NXTJS/input.css" rel="stylesheet">
<script src="../NXTJS/jsplus.js" type="text/javascript"></script>
<link href="../pinchbox.css" rel="stylesheet">
<div id="linkBack" >
    <i class="material-icons"  onclick="location.href='../random.html'">arrow_back</i>
    <span  onclick="location.href='../random.html'">Go back to rontap Tools?.</span>
    <i class="material-icons" id="NineDotMenu" onclick="run() ">apps</i>
</div>



<canvas id="canv"></canvas>
<!--i class="material-icons" id="sp">stop</i-->

<div id="options">
  <group>
    <button nxt onclick="mode='clock'">Clock</button>
    <button nxt onclick="mode='stopper'">Stopper</button>

  </group>
  <br><br>
  <input type="color" onchange="$('body').style.background=this.value">

</div>
<script>
size = 500;

mode = "clock";

unit = size / 30;
function init() {
start = new Date().getTime();
canv.style.width=size+"px";
canv.style.height=size+"px";
canv.width = size;
rundown = true;
canv.height = size;
ctx = canv.getContext('2d');
};
init();

function up() {
  ctx.clearRect(0,0,size,size);
  ctx.beginPath();

  if (mode=="stopper"){

  time = new Date().getTime() - start;

  ms = (time/1000 - Math.floor(time/1000))*2;
  sec = ((time/1000)/60)*2 - Math.floor(time/60000)*2;
  min = Math.floor(time/60000) / 60 ;



  ctx.lineWidth=2; ctx.strokeStyle="#444444";
  ctx.arc(size/2,size/2,unit*5,ms*Math.PI-Math.PI/2,(ms+.4)*Math.PI-Math.PI/2); //MS
  ctx.stroke();

  if (sec > 1.975) {
  let temp = unit - (unit* (ms/2));
  ctx.beginPath();  ctx.lineWidth=temp; ctx.strokeStyle="#4488FF";
  ctx.arc(size/2,size/2,unit*7.2,0,Math.PI*2);
  ctx.stroke();
  }
  else {
  ctx.beginPath();  ctx.lineWidth=unit; ctx.strokeStyle="#4488FF";
  ctx.arc(size/2,size/2,unit*7.2,-Math.PI/2,(sec*1.01)*Math.PI-Math.PI/2);
  ctx.stroke();
  }

  ctx.lineWidth=unit*1.5; ctx.strokeStyle="#FF8844";  ctx.beginPath();
  ctx.arc(size/2,size/2,unit*9,-Math.PI/2,(min)*Math.PI-Math.PI/2);
  ctx.stroke();
  }
  else if (mode=="clock") {

    if (rundown) shft = (new Date().getMilliseconds()/120000+new Date().getSeconds()/120+new Date().getMinutes()/2+new Date().getHours())/2;
    else shft=0;
    fullTime = new Date();
    ctx.beginPath();    ctx.lineWidth=2;ctx.strokeStyle="#444444";
    ms = new Date().getMilliseconds() / 500;
    ctx.arc(size/2,size/2,unit*5,ms*Math.PI-Math.PI,(ms+.4)*Math.PI-Math.PI); //MS
    ctx.stroke();

    ctx.beginPath();  ctx.lineWidth=unit*.8; ctx.strokeStyle="#F44336";
    sec = new Date().getSeconds() / 29.5;
    ctx.arc(size/2,size/2,unit*7.2,-Math.PI/2+shft,(sec)*Math.PI-Math.PI/2+shft);
    ctx.stroke();

    ctx.lineWidth=unit*1; ctx.strokeStyle="#2196F3";  ctx.beginPath();
    min = new Date().getMinutes() / 29.5;
    ctx.arc(size/2,size/2,unit*9,-Math.PI/2+shft*2,(min)*Math.PI-Math.PI/2+shft*2);
    ctx.stroke();

    ctx.lineWidth=unit*1.5; ctx.strokeStyle="#4CAF50";  ctx.beginPath();

    if (new Date().getHours()>12)   hour = (new Date().getHours()-12) / 6;
    else hour = new Date().getHours() / 6;
    ctx.arc(size/2,size/2,unit*11,-Math.PI/2+shft*3,(hour)*Math.PI-Math.PI/2+shft*3);
    ctx.stroke();


  }
  setTimeout(()=>up(),5);
}
up();
</script>
<style>
group {
  margin-left:0px !important;
}
#options {
  margin:0 auto;
  display: block;
  text-align: center;
}
canvas {
  display: block;
  margin:0 auto;

}
:root {
  --primary:#4CAF50;
}
#sp{
  padding:20px;
  border-radius:100%;
  border:1px solid #666;
  position:absolute;
  top: 263px;
    left: calc(50% - 35px);
}
link[document] {
  display:block;
}
.run-on #linkBack>#NineDotMenu {
  z-index: 99;
  color:white;
}
body:not(.run-on) #cnav {
    height:0;
}
body:not(.run-on) #cnav * {
opacity: 0;}
.run-on #linkBack>span {
  display: none;
}
</style>
<script>
function run() {
$('body').classList.add('run-on');
$('body').onmouseup = ()=> $('body').classList.remove('run-on');

}
setTimeout( ()=>
linkBack.innerHTML +=  $$("link[rel=import][document]")[0].import.$$('html body')[0].innerHTML,100)
</script>
<link rel="import" href="common-nav.html" document>
</html>

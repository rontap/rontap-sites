<title>HTML NXT JS Color Picker</title>



<script src="jsplus.js"></script>
<link rel="stylesheet" href="elements.css">

<link rel="stylesheet" href="design.css">

<span id="holder"></span>
<style>
html {
  margin:20px;
}
[Colorpicker] {
  border: 1px solid #80000099;
}
</style>

<script>

class Colorpicker {
  dim(variable) {
    return  {
      width:480,
      height:250,
      padding:40
    }
  }
  constructor(ref) {
    this.id = 'cp-' + Math.randInt(10000);
    this.selectedHsl = 0;
    $(ref).innerHTML+=`<canvas nxt Colorpicker id='${this.id}' width='${this.dim().width}' height='${this.dim().height}'></canvas>`;
    $(ref).onmousemove = (e) => this.handleMouseMove(e);
    $(ref).onmousedown = (e) => this.handleMouseClick(e);
    this.ctx = $('#'+this.id).getContext('2d');
    this.ctx.lineWidth=2;
    for (let xi=0; xi<360 ; xi++) {
      this.ctx.beginPath();
      this.ctx.strokeStyle = 'hsl('+xi+',50%,50%)';

      this.ctx.moveTo(55+xi,20);
      this.ctx.lineTo(55+xi,60);
      this.ctx.stroke();



    }
  }
  handleMouseMove(e) {

    let y = e.offsetX ;
    let x = e.offsetY ;
    //check wether its in range
    if ( (x>20 && x<60) && (y>55 && y<415)) {
      if (e.buttons == 1) {
          console.log(e);
      }
    }

  }
  handleMouseClick (e) {
    console.log(e.offsetX,e.offsetY);
  }

}

a = new Colorpicker('#holder');
</script>
